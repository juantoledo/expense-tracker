<!DOCTYPE html>
<html>
<head>
    <title>Quick Stats</title>
    <link rel="stylesheet" type="text/css" href="/static/styles.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="top-left">
        <a href="#" id="themeSwitcher"><i class="material-icons">brightness_6</i></a>
    </div>    
    <div class="container">
        <h1>Estadísticas Rápidas</h1>

        <% largestExpenses.forEach((expense, index) => { %>
            <h2><%= expense.year_month %></h2>
            <p>Gasto más grande del mes: <%= formatChileanPeso(expense.largest) %></p>
            <p>Gasto diario promedio: <%= formatChileanPeso(avgDailyExpenses[index].average) %></p>
        <% }); %>

        <a href="/">Volver a la página principal</a>
    </div>
    <% 
        function formatDateToDDMMYYYY(datetime) {
            const date = new Date(datetime);
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are zero-based
            const year = date.getFullYear();
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            const seconds = String(date.getSeconds()).padStart(2, '0');
            
            return `${day}/${month}/${year} ${hours}:${minutes}:${seconds}`;
        }

        function formatChileanPeso(amount) {
            return "$" + parseInt(amount).toLocaleString('es-CL');
        }
    %>
    <script src="/static/js/themeSwitcher.js"></script>
</body>
</html>
